name: Phase1 Deployment
 
on:
  workflow_dispatch:
    inputs:
      environment:
        description: "Select deployment environment"
        required: true
        type: choice
        default: "igopt"
        options:
          - igoqa
          - igopt
          - itkuat
          - itklive
 
jobs:
  deploy-phase1:
    runs-on: [self-hosted, windows]
 
    steps:
 
      ############################################################
      # STEP 1 — CHECKOUT REPOSITORY
      ############################################################
      - name: Checkout Repository
        uses: actions/checkout@v4
 
      ############################################################
      # STEP 2 — BACKEND BUILD (YOUR LOCAL SCRIPT)
      ############################################################
      - name: Run Publish Script
        shell: cmd
        run: |
          publish-script.bat
 
      ############################################################
      # STEP 3 — DOCKER DEPLOY (YOUR .BAT FILE)
      ############################################################
      - name: Run Phase1 Docker Deployment
        shell: cmd
        run: |
          Windows.Build.docker.bat ${{ github.event.inputs.environment }}
 
      ############################################################
      # STEP 4 — SUCCESS MESSAGE
      ############################################################
      - name: Completed
        run: echo "Phase1 deployment completed for ${{ github.event.inputs.environment }}"
 